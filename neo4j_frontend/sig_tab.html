<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Results Tab</title>

    <!-- Link to Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">

    <!-- Link to custom CSS -->
    <link rel="stylesheet" href="sig_tab.css">

    <!-- Our .js code -->
    <script type="text/javascript" src="sig_tab.js"></script>
</head>
<body>
    <!-- Header Section -->
    <header class="header">
        <div class="container d-flex align-items-center justify-content-between">
            <!-- Logo with hovering option for group information -->
            <div class="header-left">
                <img src="eye.jpeg" alt="Deadline Demons Logo" class="logo">
                <div class="hover-box">
                    <p><strong>Project Name:</strong>
                        <br>What is hidden in the metabolomics of the tear film of the eye
                    </p>
                    <p><strong>Group Name:</strong>
                        <br>3900 T15A Deadline Demons
                    </p>
                    <p><strong>Group Members:</strong>
                        <br>&emsp;- Mingsim Chong&emsp;- Michel Hannoun
                        <br>&emsp;- Kevin Yuan&emsp;&emsp;&emsp;- Hugo Sullivan
                        <br>&emsp;- Dan Pudig&emsp;&emsp;&emsp; - Joshua Yam
                    </p>
                    <p><strong>Clients:</strong>
                        <br>&emsp;- William Alexander Donald
                        <br>&emsp;- Nicole Carnt
                    </p>
                </div>
            </div>

            <div class="header-center">
                <h1 class="title">SIGNIFICANT METABOLITES OVERVIEW</h1>
            </div>

            <div class="header-right clickable-section" onclick="window.history.back()">
                <br> Back <br> <br>
            </div>
        </div>
    </header>

    <div class="container my-5 main-content">
        <div class="left-panel">
            <div class="card shadow-sm mb-4">
                <!-- Filter Entry -->
                <div class="card-body">
                    <input type="text" class="filter" placeholder="Type to filter results..." oninput="filterResults()" id="filter">
                </div>

                <!-- Filter by P-Value -->
                <div class="card-body">
                    <input type="number" step="0.01" id="pValueInput" placeholder="Enter p-value threshold">
                    <button onclick="filterByPValue()" class="btn btn-primary mt-2">Filter</button>
                </div>

                <!-- Sorting Options -->
                <div class="card-body">
                    <select class="sort-select" id="sortingDropdown" onchange="changeOptions()">
                        <option value="" disabled selected>Sort by...</option>
                        <option value="1">Metabolite Name</option>
                        <option value="2">Fold Change</option>
                        <option value="3">log<sub>2</sub>(Fold Change)</option>
                        <option value="4">P-Value</option>
                        <option value="5">CVG Count</option>
                        <option value="6">CVH Count</option>
                        <option value="7">Status</option>
                        <option value="8">Regulation</option>
                        <option value="9">Source</option>
                    </select>
                    
                    <div class="sort-direction" id="sort-direction">
                        <input type="radio" id="asc" name="direction" value="asc" onchange="sortResults()" checked>
                        <label for="asc"></label>
                        <input type="radio" id="desc" name="direction" value="desc" onchange="sortResults()">
                        <label for="desc"></label>
                    </div>
                </div>
            </div>

            <!-- Legend -->
            <div class="legend-section mb-4">
                <h3 class="text-muted">Legend</h3>
                <p><strong>Fold Change:</strong> Represents the change in metabolite abundance between the Glaucoma (CVG) and Healthy (Control, CVH) groups, with <em>log<sub>2</sub>Fold Change</em> values used to indicate upregulation or downregulation.</p>
                <p><strong>p-values:</strong> The p-values for each metabolite based on the T-test, indicating statistical significance.</p>
                <p><strong>CVG Samples:</strong> Number of samples in the Glaucoma (CVG) group.</p>
                <p><strong>CVH Samples:</strong> Number of samples in the Healthy (CVH/Control) group.</p>
                <p><strong>Status:</strong> Indicates whether there is sufficient data for significance testing.</p>
                <p><strong>Significance:</strong> Shows if the metabolite is statistically significant based on the T-test.</p>
                <p><strong>Regulation Indicators:</strong> Shows the regulation direction of metabolites in the Glaucoma group (CVG) compared to the Control (CVH) group:
                    <ul>
                        <li><span style="color: green;">↑</span> - Upregulated in the Glaucoma (CVG) group</li>
                        <li><span style="color: red;">↓</span> - Downregulated in the Glaucoma (CVG) group</li>
                    </ul>
                </p>
            </div>
        </div>

        <!-- Results Table -->
        <div class="right-panel">
            <div class="border border-3">
                <table class="resultsTable" id="resultsTable">
                    <thead>
                        <tr>
                            <th class="metabolites">Metabolite</th>
                            <th class="fold">Fold Change</th>
                            <th class="log">log<sub>2</sub>Fold Change</th>
                            <th class="pvalue">P-Value</th>
                            <th class="cvg">CVG Count</th>
                            <th class="cvh">CVH Count</th>
                            <th class="status">Status</th>
                            <th class="regulation">Regulation</th>
                            <th class="src">Source</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody"></tbody>
                </table>
            </div>
        </div>
    </div>
</body>
</html>
