<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Results Tab</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="sig_tab.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script defer src="sig_tab.js"></script>
</head>
<body>
<header class="header">
    <div class="container d-flex align-items-center justify-content-between">
        <div class="header-left">
            <img src="eye.jpeg" alt="Deadline Demons Logo" class="logo">
            <div class="hover-box">
                <p><strong>Project Name:</strong><br>What is hidden in the metabolomics of the tear film of the eye</p>
                <p><strong>Group Name:</strong><br>3900 T15A Deadline Demons</p>
                <p><strong>Group Members:</strong><br>&emsp;- Mingsim Chong&emsp;- Michel Hannoun<br>&emsp;- Kevin Yuan&emsp;&emsp;&emsp;- Hugo Sullivan<br>&emsp;- Dan Pudig&emsp;&emsp;&emsp; - Joshua Yam</p>
                <p><strong>Clients:</strong><br>&emsp;- William Alexander Donald<br>&emsp;- Nicole Carnt</p>
            </div>
        </div>
        <div class="header-center">
            <h1 class="title">SIGNIFICANT METABOLITES OVERVIEW</h1>
        </div>
        <div class="header-right clickable-section" onclick="window.history.back()">
            <br> Back <br><br>
        </div>
    </div>
</header>

<div class="container my-5 main-content">
    <div class="left-panel">
        <div class="card shadow-sm mb-4">
            <div class="card-body">
                <input type="file" id="uploadExcel" accept=".xlsx,.xls" class="form-control mb-2">
                <input type="text" class="filter" placeholder="Type to filter results..." oninput="filterResults()" id="filter">
            </div>
            <div class="card-body">
                <input type="number" step="0.01" id="pValueInput" placeholder="Enter p-value threshold">
                <button onclick="filterByPValue()" class="btn btn-primary mt-2">Filter</button>
            </div>
            <div class="card-body">
                <select class="sort-select" id="sortingDropdown" onchange="changeOptions()">
                    <option value="" disabled selected>Sort by...</option>
                    <option value="1">Metabolite Name</option>
                    <option value="2">Fold Change</option>
                    <option value="3">log₂(Fold Change)</option>
                    <option value="4">P-Value</option>
                    <option value="8">Regulation</option>
                </select>
                <div class="sort-direction" id="sort-direction">
                    <input type="radio" id="asc" name="direction" value="asc" onchange="sortResults()" checked>
                    <label for="asc">Ascending</label>
                    <input type="radio" id="desc" name="direction" value="desc" onchange="sortResults()">
                    <label for="desc">Descending</label>
                </div>
            </div>
        </div>

        <!-- Updated Legend -->
        <div class="legend-section mb-4">
            <h3 class="text-muted">Legend</h3>
            <ul>
                <li><strong>Fold Change:</strong> The ratio of average metabolite abundance between Glaucoma (CVG) and Control (CVH) groups.</li>
                <li><strong>log₂ Fold Change:</strong> Logarithm base 2 of Fold Change. Values > 0 indicate increase in Glaucoma group; < 0 indicate decrease.</li>
                <li><strong>P-Value:</strong> Significance level from T-test. Lower p-values imply stronger statistical difference.</li>
                <li><strong>Regulation:</strong> Direction of abundance change:
                    <ul>
                        <li><span style="color: green;">↑ Upregulated</span>: Higher in Glaucoma (log₂ FC > 0)</li>
                        <li><span style="color: red;">↓ Downregulated</span>: Lower in Glaucoma (log₂ FC < 0)</li>
                    </ul>
                </li>
                <li><strong>Replicated Entries:</strong> Number of times this metabolite ID appears in the dataset (duplicate count).</li>
            </ul>
        </div>
    </div>

    <!-- Results Table -->
    <div class="right-panel">
        <div class="border border-3">
            <table class="resultsTable" id="resultsTable">
                <thead>
                    <tr>
                        <th>Metabolite</th>
                        <th>Fold Change</th>
                        <th>log₂ Fold Change</th>
                        <th>P-Value</th>
                        <th>Regulation</th>
                        <th>Replicated Entries</th>
                    </tr>
                </thead>
                <tbody id="tableBody"></tbody>
            </table>
        </div>
    </div>
</div>
</body>
</html>
